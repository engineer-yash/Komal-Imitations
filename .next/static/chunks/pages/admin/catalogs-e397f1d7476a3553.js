(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[817],{9135:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/catalogs",function(){return a(365)}])},365:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return d}});var l=a(5893),r=a(7294),s=a(1163),i=a(9008),o=a.n(i),n=a(7066);function d(){let e=(0,s.useRouter)(),[t,a]=(0,r.useState)([]),[i,d]=(0,r.useState)(!1),[c,u]=(0,r.useState)({title:"",description:"",fileUrl:"",thumbnailUrl:""});(0,r.useEffect)(()=>{if(!localStorage.getItem("token")){e.push("/admin/login");return}m()},[]);let m=async()=>{try{let e=localStorage.getItem("token"),t=await n.Z.get("/api/catalogs",{headers:{Authorization:"Bearer ".concat(e)}});a(t.data)}catch(e){console.error("Error:",e)}},h=async e=>{e.preventDefault();try{let e=localStorage.getItem("token");await n.Z.post("/api/catalogs",c,{headers:{Authorization:"Bearer ".concat(e)}}),p(),m()}catch(e){alert("Error saving catalog")}},x=async e=>{if(confirm("Delete this catalog?"))try{let t=localStorage.getItem("token");await n.Z.delete("/api/catalogs?id=".concat(e),{headers:{Authorization:"Bearer ".concat(t)}}),m()}catch(e){alert("Error deleting catalog")}},p=()=>{u({title:"",description:"",fileUrl:"",thumbnailUrl:""}),d(!1)};return(0,l.jsxs)("div",{className:"min-h-screen bg-secondary",children:[(0,l.jsx)(o(),{children:(0,l.jsx)("title",{children:"Manage Catalogs - Admin"})}),(0,l.jsx)("nav",{className:"bg-white border-b border-border",children:(0,l.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,l.jsxs)("div",{className:"flex justify-between items-center h-16",children:[(0,l.jsx)("button",{onClick:()=>e.push("/admin/dashboard"),className:"text-primary",children:"â† Dashboard"}),(0,l.jsx)("h1",{className:"text-xl font-bold font-playfair",children:"Catalogs"})]})})}),(0,l.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,l.jsxs)("h2",{className:"text-2xl font-bold",children:["All Catalogs (",t.length,")"]}),(0,l.jsx)("button",{onClick:()=>d(!i),className:"bg-primary text-white px-6 py-2 rounded-full hover:bg-[#B5952F]","data-testid":"add-catalog-button",children:i?"Cancel":"+ Add Catalog"})]}),i&&(0,l.jsxs)("div",{className:"bg-white p-6 mb-6 shadow-sm","data-testid":"catalog-form",children:[(0,l.jsx)("h3",{className:"text-xl font-semibold mb-4",children:"Add Catalog"}),(0,l.jsxs)("form",{onSubmit:h,className:"space-y-4",children:[(0,l.jsx)("input",{type:"text",placeholder:"Catalog Title",value:c.title,onChange:e=>u({...c,title:e.target.value}),required:!0,className:"w-full px-4 py-2 border border-border rounded-sm","data-testid":"catalog-title-input"}),(0,l.jsx)("input",{type:"text",placeholder:"File URL (PDF or image)",value:c.fileUrl,onChange:e=>u({...c,fileUrl:e.target.value}),required:!0,className:"w-full px-4 py-2 border border-border rounded-sm","data-testid":"catalog-file-input"}),(0,l.jsx)("input",{type:"text",placeholder:"Thumbnail URL (optional)",value:c.thumbnailUrl,onChange:e=>u({...c,thumbnailUrl:e.target.value}),className:"w-full px-4 py-2 border border-border rounded-sm"}),(0,l.jsx)("textarea",{placeholder:"Description (optional)",value:c.description,onChange:e=>u({...c,description:e.target.value}),className:"w-full px-4 py-2 border border-border rounded-sm",rows:"3"}),(0,l.jsx)("button",{type:"submit",className:"bg-primary text-white px-8 py-2 rounded-full hover:bg-[#B5952F]","data-testid":"save-catalog-button",children:"Add Catalog"})]})]}),(0,l.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6","data-testid":"catalogs-grid",children:t.map(e=>(0,l.jsxs)("div",{className:"bg-white p-6 shadow-sm",children:[e.thumbnailUrl&&(0,l.jsx)("img",{src:e.thumbnailUrl,alt:e.title,className:"w-full h-48 object-cover mb-4"}),(0,l.jsx)("h3",{className:"font-semibold mb-2",children:e.title}),e.description&&(0,l.jsx)("p",{className:"text-sm text-muted-foreground mb-4",children:e.description}),(0,l.jsxs)("div",{className:"flex space-x-2",children:[(0,l.jsx)("a",{href:e.fileUrl,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-primary hover:underline",children:"View"}),(0,l.jsx)("button",{onClick:()=>x(e._id),className:"text-sm text-red-600 hover:underline",children:"Delete"})]})]},e._id))})]})]})}},1163:function(e,t,a){e.exports=a(3079)}},function(e){e.O(0,[703,888,774,179],function(){return e(e.s=9135)}),_N_E=e.O()}]);