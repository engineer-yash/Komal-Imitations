(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[444],{3752:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/categories",function(){return a(5720)}])},5720:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return o}});var r=a(5893),s=a(7294),i=a(1163),l=a(9008),n=a.n(l),d=a(7066);function o(){let e=(0,i.useRouter)(),[t,a]=(0,s.useState)([]),[l,o]=(0,s.useState)(!1),[c,m]=(0,s.useState)(null),[u,x]=(0,s.useState)({name:"",slug:"",description:"",imageUrl:""});(0,s.useEffect)(()=>{if(!localStorage.getItem("token")){e.push("/admin/login");return}p()},[]);let p=async()=>{try{let e=localStorage.getItem("token"),t=await d.Z.get("/api/categories",{headers:{Authorization:"Bearer ".concat(e)}});a(t.data)}catch(e){console.error("Error:",e)}},h=async e=>{e.preventDefault();try{let e=localStorage.getItem("token"),t={headers:{Authorization:"Bearer ".concat(e)}};c?await d.Z.put("/api/categories",{...u,id:c._id},t):await d.Z.post("/api/categories",u,t),y(),p()}catch(e){alert("Error saving category")}},g=async e=>{if(confirm("Delete this category?"))try{let t=localStorage.getItem("token");await d.Z.delete("/api/categories?id=".concat(e),{headers:{Authorization:"Bearer ".concat(t)}}),p()}catch(e){alert("Error deleting category")}},b=e=>{m(e),x({name:e.name,slug:e.slug,description:e.description||"",imageUrl:e.imageUrl||""}),o(!0)},y=()=>{x({name:"",slug:"",description:"",imageUrl:""}),m(null),o(!1)};return(0,r.jsxs)("div",{className:"min-h-screen bg-secondary",children:[(0,r.jsx)(n(),{children:(0,r.jsx)("title",{children:"Manage Categories - Admin"})}),(0,r.jsx)("nav",{className:"bg-white border-b border-border",children:(0,r.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,r.jsxs)("div",{className:"flex justify-between items-center h-16",children:[(0,r.jsx)("button",{onClick:()=>e.push("/admin/dashboard"),className:"text-primary",children:"â† Dashboard"}),(0,r.jsx)("h1",{className:"text-xl font-bold font-playfair",children:"Categories"})]})})}),(0,r.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,r.jsxs)("h2",{className:"text-2xl font-bold",children:["All Categories (",t.length,")"]}),(0,r.jsx)("button",{onClick:()=>o(!l),className:"bg-primary text-white px-6 py-2 rounded-full hover:bg-[#B5952F]","data-testid":"add-category-button",children:l?"Cancel":"+ Add Category"})]}),l&&(0,r.jsxs)("div",{className:"bg-white p-6 mb-6 shadow-sm","data-testid":"category-form",children:[(0,r.jsxs)("h3",{className:"text-xl font-semibold mb-4",children:[c?"Edit":"Add"," Category"]}),(0,r.jsxs)("form",{onSubmit:h,className:"space-y-4",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsx)("input",{type:"text",placeholder:"Category Name",value:u.name,onChange:e=>x({...u,name:e.target.value}),required:!0,className:"px-4 py-2 border border-border rounded-sm","data-testid":"category-name-input"}),(0,r.jsx)("input",{type:"text",placeholder:"Slug (e.g., necklaces)",value:u.slug,onChange:e=>x({...u,slug:e.target.value}),required:!0,className:"px-4 py-2 border border-border rounded-sm","data-testid":"category-slug-input"})]}),(0,r.jsx)("input",{type:"text",placeholder:"Image URL (optional)",value:u.imageUrl,onChange:e=>x({...u,imageUrl:e.target.value}),className:"w-full px-4 py-2 border border-border rounded-sm"}),(0,r.jsx)("textarea",{placeholder:"Description (optional)",value:u.description,onChange:e=>x({...u,description:e.target.value}),className:"w-full px-4 py-2 border border-border rounded-sm",rows:"3"}),(0,r.jsxs)("button",{type:"submit",className:"bg-primary text-white px-8 py-2 rounded-full hover:bg-[#B5952F]","data-testid":"save-category-button",children:[c?"Update":"Create"," Category"]})]})]}),(0,r.jsx)("div",{className:"bg-white shadow-sm overflow-hidden","data-testid":"categories-list",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-border",children:[(0,r.jsx)("thead",{className:"bg-secondary",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase",children:"Name"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase",children:"Slug"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase",children:"Actions"})]})}),(0,r.jsx)("tbody",{className:"divide-y divide-border",children:t.map(e=>(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{className:"px-6 py-4",children:e.name}),(0,r.jsx)("td",{className:"px-6 py-4",children:e.slug}),(0,r.jsxs)("td",{className:"px-6 py-4 space-x-2",children:[(0,r.jsx)("button",{onClick:()=>b(e),className:"text-primary hover:underline",children:"Edit"}),(0,r.jsx)("button",{onClick:()=>g(e._id),className:"text-red-600 hover:underline",children:"Delete"})]})]},e._id))})]})})]})]})}},1163:function(e,t,a){e.exports=a(3079)}},function(e){e.O(0,[703,888,774,179],function(){return e(e.s=3752)}),_N_E=e.O()}]);