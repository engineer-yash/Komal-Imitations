(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[60],{2689:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/messages",function(){return t(8714)}])},8714:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return d}});var a=t(5893),n=t(7294),r=t(1163),l=t(9008),i=t.n(l),c=t(7066);function d(){let e=(0,r.useRouter)(),[s,t]=(0,n.useState)([]);(0,n.useEffect)(()=>{if(!localStorage.getItem("token")){e.push("/admin/login");return}l()},[]);let l=async()=>{try{let e=localStorage.getItem("token"),s=await c.Z.get("/api/contact",{headers:{Authorization:"Bearer ".concat(e)}});t(s.data)}catch(e){console.error("Error:",e)}},d=async(e,s)=>{try{let t=localStorage.getItem("token");await c.Z.put("/api/contact",{id:e,status:s},{headers:{Authorization:"Bearer ".concat(t)}}),l()}catch(e){alert("Error updating status")}};return(0,a.jsxs)("div",{className:"min-h-screen bg-secondary",children:[(0,a.jsx)(i(),{children:(0,a.jsx)("title",{children:"Messages - Admin"})}),(0,a.jsx)("nav",{className:"bg-white border-b border-border",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"flex justify-between items-center h-16",children:[(0,a.jsx)("button",{onClick:()=>e.push("/admin/dashboard"),className:"text-primary",children:"â† Dashboard"}),(0,a.jsx)("h1",{className:"text-xl font-bold font-playfair",children:"Messages"})]})})}),(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,a.jsxs)("h2",{className:"text-2xl font-bold mb-6",children:["Contact Messages (",s.length,")"]}),(0,a.jsx)("div",{className:"space-y-4","data-testid":"messages-list",children:s.map(e=>(0,a.jsxs)("div",{className:"bg-white p-6 shadow-sm",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold text-lg",children:e.name}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:e.email}),e.phone&&(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:e.phone})]}),(0,a.jsx)("span",{className:"px-3 py-1 rounded-full text-xs ".concat("new"===e.status?"bg-blue-100 text-blue-800":"read"===e.status?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"),children:e.status})]}),(0,a.jsx)("p",{className:"text-muted-foreground mb-4",children:e.message}),(0,a.jsxs)("div",{className:"flex space-x-2",children:["new"===e.status&&(0,a.jsx)("button",{onClick:()=>d(e._id,"read"),className:"text-sm text-primary hover:underline",children:"Mark as Read"}),"read"===e.status&&(0,a.jsx)("button",{onClick:()=>d(e._id,"replied"),className:"text-sm text-primary hover:underline",children:"Mark as Replied"})]})]},e._id))})]})]})}},1163:function(e,s,t){e.exports=t(3079)}},function(e){e.O(0,[703,888,774,179],function(){return e(e.s=2689)}),_N_E=e.O()}]);