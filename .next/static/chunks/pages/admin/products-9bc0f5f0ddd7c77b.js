(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[209],{2678:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/products",function(){return r(7469)}])},7469:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return l}});var a=r(5893),d=r(7294),s=r(1163),i=r(9008),c=r.n(i),n=r(7066);function l(){let e=(0,s.useRouter)(),[t,r]=(0,d.useState)([]),[i,l]=(0,d.useState)([]),[o,p]=(0,d.useState)(!1),[u,x]=(0,d.useState)(null),[m,h]=(0,d.useState)({name:"",categoryId:"",imageUrl:"",price:"",size:"",gender:"Unisex",description:"",featured:!1});(0,d.useEffect)(()=>{if(!localStorage.getItem("token")){e.push("/admin/login");return}g()},[]);let g=async()=>{try{let e=localStorage.getItem("token"),t={headers:{Authorization:"Bearer ".concat(e)}},[a,d]=await Promise.all([n.Z.get("/api/products",t),n.Z.get("/api/categories",t)]);r(a.data),l(d.data)}catch(e){console.error("Error:",e)}},b=async e=>{e.preventDefault();try{let e=localStorage.getItem("token"),t={headers:{Authorization:"Bearer ".concat(e)}};u?await n.Z.put("/api/products",{...m,id:u._id},t):await n.Z.post("/api/products",m,t),f(),g()}catch(e){alert("Error saving product")}},y=async e=>{if(confirm("Delete this product?"))try{let t=localStorage.getItem("token");await n.Z.delete("/api/products?id=".concat(e),{headers:{Authorization:"Bearer ".concat(t)}}),g()}catch(e){alert("Error deleting product")}},j=e=>{x(e),h({name:e.name,categoryId:e.categoryId._id||e.categoryId,imageUrl:e.imageUrl,price:e.price,size:e.size||"",gender:e.gender,description:e.description||"",featured:e.featured||!1}),p(!0)},f=()=>{h({name:"",categoryId:"",imageUrl:"",price:"",size:"",gender:"Unisex",description:"",featured:!1}),x(null),p(!1)};return(0,a.jsxs)("div",{className:"min-h-screen bg-secondary",children:[(0,a.jsx)(c(),{children:(0,a.jsx)("title",{children:"Manage Products - Admin"})}),(0,a.jsx)("nav",{className:"bg-white border-b border-border",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"flex justify-between items-center h-16",children:[(0,a.jsx)("button",{onClick:()=>e.push("/admin/dashboard"),className:"text-primary",children:"← Dashboard"}),(0,a.jsx)("h1",{className:"text-xl font-bold font-playfair",children:"Products"})]})})}),(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,a.jsxs)("h2",{className:"text-2xl font-bold",children:["All Products (",t.length,")"]}),(0,a.jsx)("button",{onClick:()=>p(!o),className:"bg-primary text-white px-6 py-2 rounded-full hover:bg-[#B5952F]","data-testid":"add-product-button",children:o?"Cancel":"+ Add Product"})]}),o&&(0,a.jsxs)("div",{className:"bg-white p-6 mb-6 shadow-sm","data-testid":"product-form",children:[(0,a.jsxs)("h3",{className:"text-xl font-semibold mb-4",children:[u?"Edit":"Add"," Product"]}),(0,a.jsxs)("form",{onSubmit:b,className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsx)("input",{type:"text",placeholder:"Product Name",value:m.name,onChange:e=>h({...m,name:e.target.value}),required:!0,className:"px-4 py-2 border border-border rounded-sm","data-testid":"product-name-input"}),(0,a.jsxs)("select",{value:m.categoryId,onChange:e=>h({...m,categoryId:e.target.value}),required:!0,className:"px-4 py-2 border border-border rounded-sm","data-testid":"product-category-input",children:[(0,a.jsx)("option",{value:"",children:"Select Category"}),i.map(e=>(0,a.jsx)("option",{value:e._id,children:e.name},e._id))]}),(0,a.jsx)("input",{type:"text",placeholder:"Image URL",value:m.imageUrl,onChange:e=>h({...m,imageUrl:e.target.value}),required:!0,className:"px-4 py-2 border border-border rounded-sm","data-testid":"product-image-input"}),(0,a.jsx)("input",{type:"number",placeholder:"Price",value:m.price,onChange:e=>h({...m,price:e.target.value}),required:!0,className:"px-4 py-2 border border-border rounded-sm","data-testid":"product-price-input"}),(0,a.jsx)("input",{type:"text",placeholder:"Size (optional)",value:m.size,onChange:e=>h({...m,size:e.target.value}),className:"px-4 py-2 border border-border rounded-sm"}),(0,a.jsxs)("select",{value:m.gender,onChange:e=>h({...m,gender:e.target.value}),className:"px-4 py-2 border border-border rounded-sm","data-testid":"product-gender-input",children:[(0,a.jsx)("option",{value:"Unisex",children:"Unisex"}),(0,a.jsx)("option",{value:"Female",children:"Female"}),(0,a.jsx)("option",{value:"Male",children:"Male"})]})]}),(0,a.jsx)("textarea",{placeholder:"Description (optional)",value:m.description,onChange:e=>h({...m,description:e.target.value}),className:"w-full px-4 py-2 border border-border rounded-sm",rows:"3"}),(0,a.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,a.jsx)("input",{type:"checkbox",checked:m.featured,onChange:e=>h({...m,featured:e.target.checked}),"data-testid":"product-featured-checkbox"}),(0,a.jsx)("span",{children:"Featured Product"})]}),(0,a.jsxs)("button",{type:"submit",className:"bg-primary text-white px-8 py-2 rounded-full hover:bg-[#B5952F]","data-testid":"save-product-button",children:[u?"Update":"Create"," Product"]})]})]}),(0,a.jsx)("div",{className:"bg-white shadow-sm overflow-hidden","data-testid":"products-list",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-border",children:[(0,a.jsx)("thead",{className:"bg-secondary",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase",children:"Image"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase",children:"Name"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase",children:"Category"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase",children:"Price"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase",children:"Actions"})]})}),(0,a.jsx)("tbody",{className:"divide-y divide-border",children:t.map(e=>{var t;return(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsx)("img",{src:e.imageUrl,alt:e.name,className:"w-16 h-16 object-cover"})}),(0,a.jsx)("td",{className:"px-6 py-4",children:e.name}),(0,a.jsx)("td",{className:"px-6 py-4",children:(null===(t=e.categoryId)||void 0===t?void 0:t.name)||"N/A"}),(0,a.jsxs)("td",{className:"px-6 py-4",children:["₹",e.price]}),(0,a.jsxs)("td",{className:"px-6 py-4 space-x-2",children:[(0,a.jsx)("button",{onClick:()=>j(e),className:"text-primary hover:underline","data-testid":"edit-product-".concat(e._id),children:"Edit"}),(0,a.jsx)("button",{onClick:()=>y(e._id),className:"text-red-600 hover:underline","data-testid":"delete-product-".concat(e._id),children:"Delete"})]})]},e._id)})})]})})]})]})}},1163:function(e,t,r){e.exports=r(3079)}},function(e){e.O(0,[703,888,774,179],function(){return e(e.s=2678)}),_N_E=e.O()}]);